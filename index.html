<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamFlix - Streaming Service</title>
    <!-- Version: 2023-04-04 Telegram Mini App Fix -->
    <!-- GitHub Pages SPA redirect script -->
    <script type="text/javascript">
      // Single Page Apps for GitHub Pages
      // MIT License https://github.com/rafgraph/spa-github-pages
      // This script checks to see if a redirect is present in the query string,
      // converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CRITICAL: LOAD IN CORRECT ORDER - Load configuration first -->
    <script src="js/config.js"></script>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- CRITICAL: LOAD IN CORRECT ORDER - App components -->
    <script src="js/router.js"></script>
    <script src="js/telegram-app.js"></script>
    <script src="js/api-service.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
    <div class="app-container">
    <!-- Search Bar -->
    <div class="search-bar">
            <div class="search-field">
            <i class="fas fa-search"></i>
                <input type="text" placeholder="Search movies..." id="search-input">
                <i class="fas fa-microphone"></i>
        </div>
    </div>
        
        <!-- Hero Card (Featured Content) -->
        <div class="hero-card">
            <div class="featured-card" id="featured-movie">
                <div class="badge">Featured</div>
                <div class="likes" id="featured-like">
                    <i class="fas fa-thumbs-up"></i>
                    <span>1.5K</span>
                </div>
                <img src="https://archive.org/services/img/earth-vs-the-flying-saucers-color" alt="Featured Movie">
                <div class="title-container">
                    <h2>Earth vs the Flying Saucers</h2>
                </div>
            </div>
        </div>
        
        <!-- Category Container -->
        <div id="category-container">
            <!-- Test Video Section - Guaranteed to work -->
            <div class="section">
                <div class="section-header">
                    <h3>Test Video Player</h3>
                    <span class="subtitle" style="font-size: 0.8rem; color: #ccc; margin-left: 10px;">Guaranteed to work</span>
                </div>
                <div class="content-row" id="test-video-row">
                    <div class="content-card" id="test-video-card" style="min-width: 300px;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Big_buck_bunny_poster_big.jpg/800px-Big_buck_bunny_poster_big.jpg" alt="Big Buck Bunny">
                        <div class="card-info">
                            <p>Big Buck Bunny (Test Video)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- New Releases Section -->
            <div class="section">
                <div class="section-header">
                    <h3>New Releases</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="new-releases-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>

            <!-- Popular Movies Section -->
            <div class="section">
                <div class="section-header">
                    <h3>Popular Movies</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="popular-movies-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>

            <!-- Public Domain Classics -->
            <div class="section">
                <div class="section-header">
                    <h3>Public Domain Classics</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="classics-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Action Movies -->
            <div class="section">
                <div class="section-header">
                    <h3>Action Movies</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="action-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Sci-Fi -->
            <div class="section">
                <div class="section-header">
                    <h3>Sci-Fi</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="scifi-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Drama -->
            <div class="section">
                <div class="section-header">
                    <h3>Drama</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="drama-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Comedy -->
            <div class="section">
                <div class="section-header">
                    <h3>Comedy</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="comedy-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Horror -->
            <div class="section">
                <div class="section-header">
                    <h3>Horror</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="horror-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Documentary -->
            <div class="section">
                <div class="section-header">
                    <h3>Documentary</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="documentary-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Animation -->
            <div class="section">
                <div class="section-header">
                    <h3>Animation</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="animation-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Family -->
            <div class="section">
                <div class="section-header">
                    <h3>Family</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="family-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>

            <!-- Mystery -->
            <div class="section">
                <div class="section-header">
                    <h3>Mystery</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="mystery-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Thriller -->
            <div class="section">
                <div class="section-header">
                    <h3>Thriller</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="thriller-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Romance -->
            <div class="section">
                <div class="section-header">
                    <h3>Romance</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="romance-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Western -->
            <div class="section">
                <div class="section-header">
                    <h3>Western</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="western-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- War -->
            <div class="section">
                <div class="section-header">
                    <h3>War</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="war-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Fantasy -->
            <div class="section">
                <div class="section-header">
                    <h3>Fantasy</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="fantasy-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Crime -->
            <div class="section">
                <div class="section-header">
                    <h3>Crime</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="crime-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Adventure -->
            <div class="section">
                <div class="section-header">
                    <h3>Adventure</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="adventure-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Biography -->
            <div class="section">
                <div class="section-header">
                    <h3>Biography</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="biography-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- History -->
            <div class="section">
                <div class="section-header">
                    <h3>History</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="history-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Music -->
            <div class="section">
                <div class="section-header">
                    <h3>Music</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="music-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Sport -->
            <div class="section">
                <div class="section-header">
                    <h3>Sport</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="sport-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Short Films -->
            <div class="section">
                <div class="section-header">
                    <h3>Short Films</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="short-films-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
            
            <!-- Foreign -->
            <div class="section">
                <div class="section-header">
                    <h3>Foreign</h3>
                    <span class="see-all">See All</span>
                </div>
                <div class="content-row" id="foreign-row">
                    <!-- Content will be loaded dynamically -->
                    <div class="loading-spinner">Loading...</div>
                </div>
            </div>
        </div>
        
        <!-- Navigation Bar -->
        <div class="nav-bar">
            <div class="nav-item active">
                <a href="index.html">
                    <i class="fas fa-home"></i>
                    <p>Home</p>
                </a>
            </div>
            <div class="nav-item">
                <a href="pages/activity.html">
                    <i class="fas fa-chart-line"></i>
                    <p>Activity</p>
                </a>
            </div>
            <div class="nav-item">
                <a href="pages/account.html">
                    <i class="fas fa-user"></i>
                    <p>Account</p>
                </a>
            </div>
        </div>
    </div>

    <!-- IMPORTANT: NO INLINE SCRIPTS HERE -->
</body>
</html>